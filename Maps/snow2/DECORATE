//////////////////////
// SNOW SPAWNERS    //
// by Tormentor667  //
// improved by Ceeb //
//////////////////////

Actor SnowParticle
{
	Radius 1
	Height 1
	Damage 0
	Projectile
	RenderStyle Translucent
	Alpha 0
	Scale 0.6

	+MISSILE 
	+NOBLOCKMAP

	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetScale(frandom(0.3, 0.6))
		SNOW AAAAAAA 2 A_FadeIn(0.1)
		SNOW A 3
		goto Spawn+9
		Death:
		SNOW A 1 A_FadeOut(0.05)
		Loop
	}
}

Actor SnowSpawner
{
	Radius 1
	Height 1

	+NOBLOCKMAP
	+NOGRAVITY
	+NOSECTOR
	+NOINTERACTION
	+NOCLIP
	-SOLID
	+CLIENTSIDEONLY
	+SPAWNCEILING

	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Unsighted")
		TNT1 A 0 A_JumpIf(Args[2] > 0, "Circle")
		TNT1 A 8 A_SpawnItemEx ("SnowParticle", Random(-Args[0], -Args[0]), Random(-Args[0], -Args[0]), 0, frandom(-1.0, 1.0), frandom(-1.0, 1.0), frandom(-1.0, -3.0), 0, 128, Args[1])
		Loop
	Circle:
		TNT1 A 8 A_SpawnItemEx ("SnowParticle", Random(-Args[0], -Args[0]), 0, 0, frandom(-1.0, 1.0), frandom(-1.0, 1.0), frandom(-1.0, -3.0), Random(0, 360), 128, Args[1])
		Loop
	Unsighted:
		TNT1 A 1
		Goto Spawn
	}
}

// Firewood

actor CleanLog : ZLog
{
	States
	{
		Spawn:
			LOG2 A -1
			Stop
	}
}

actor CharredLog : ZLog
{
	States
	{
		Spawn:
			LOG2 B -1
			Stop
	}
}

actor BurningLog : ZLog
{
	States
	{
		Spawn:
			LOG2 CDE 4 Bright
			Loop
	}
}

actor EmberLog : ZLog
{
	States
	{
		Spawn:
			LOG2 FGH 4 Bright
			Loop
	}
}

actor CutLog : ZLog
{
	States
	{
		Spawn:
			LOG2 I -1
			Stop
	}
}

actor IceShotgun : Shotgun
{
  Weapon.SelectionOrder 110
  Weapon.AmmoUse 1 // Actually uses 3, since it fires 3 projectiles. Can still be used with under 3 ammo, but will only fire however many cells you have.
  Weapon.AmmoGive 30
  Weapon.AmmoType "Cell"
  Inventory.PickupMessage "You got the Ice Shotgun!"
  Tag "Ice Shotgun"
  Weapon.SlotNumber 6
  States
  {
  Ready:
    ISHT A 1 A_WeaponReady
    Loop
  Deselect:
    ISHT A 1 A_Lower
    Loop
  Select:
    ISHT A 1 A_Raise
    Loop
  Fire:
    ISHT A 3
    ISHT A 0 A_FireCustomMissile("FreezeBlast",0)
    ISHT A 0 A_FireCustomMissile("FreezeBlast",5)
    ISHT A 0 A_FireCustomMissile("FreezeBlast",-5)
	ISHT A 0 A_PlaySound ("weapons/iceshgn", CHAN_WEAPON)
    ISHT A 7 A_GunFlash
    ISHT BC 5
    ISHT D 4
    ISHT CB 5
    ISHT A 3
    ISHT A 7 A_ReFire
    Goto Ready
  AltFire:
  // Was going to be a kick, but I don't wanna.
    PUNG B 4
    PUNG C 4 A_Punch
    PUNG D 5
    PUNG C 4
    PUNG B 5 A_ReFire
    Goto Ready
  Flash:
    ISHF A 4 Bright A_Light1
    ISHF B 3 Bright A_Light2
    Goto LightDone
  Spawn:
    ISHG A -1
    Stop
  }
}

actor FreezeBlast
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 25
  Damage 6
  Projectile
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
  scale 0.9
  SeeSound "weapons/iceshot"
  DeathSound "weapons/icehit"
  Obituary "%o got frozen solid by %k."
  DamageType Ice
  States
  {
  Spawn:
    FBLS A 6 bright A_SpawnItem("FreezeBlastTrail")
    loop
  Death:
    FBLS BCDE 4 bright
    stop
  }
}

actor FreezeBlastTrail
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 20
  Damage 0
  Projectile
  +RANDOMIZE
  RenderStyle Add
  Alpha 0.75
//  SeeSound "weapons/iceshot"
  DeathSound "weapons/icehit"
  Obituary "%o got frozen solid by %k."
  States
  {
  Spawn:
    FRTR ABC 6 bright A_FadeOut(0.2)
    loop
  Death:
    FRTR ABC 4 bright
    stop
  }
}
